<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="">
    <link rel="stylesheet" href="css/print.css" type="text/css" media="print">
    <link rel="alternate" type="application/rss+xml" href="feed/" title="RSS Feed">
    <link rel="author" href="humans.txt">

    <script src="modernizr.min.js"></script>

  </head>
  <body>


  <img src="img/low-res.png" alt="" width="320px" height="480px" data-res-src="img/high-res.png" />



    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script><script>/*<![CDATA[*/window.jQuery||document.write('<script src="http://chrisblazek.me/wp-content/themes/chrisblazek/js/libs/jquery-1.6.2.min.js"><\/script>')/*]]>*/</script> <!--[if lt IE 7 ]><script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script><script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script><![endif]-->
    <script type="text/javascript">
      Modernizr.addTest('retina', function () {

//        var rules = [],
//        result = false,
//        i = 0;
//        rules.push("screen and (-webkit-min-device-pixel-ratio:1) and (min-width: 2000px)");
//        rules.push("screen and (min-device-width: 320px) and (max-device-width: 480px)");
//        rules.push("screen and (-webkit-pixel-ratio: 2) and (max-device-width: 640px) and (orientation: landscape)");
//        rules.push("screen and (-webkit-pixel-ratio: 2) and (max-device-width: 360px) and (orientation: portrait)");
//        rules.push("screen and (-webkit-pixel-ratio: 1.5) and (max-device-width: 640px) and (orientation: landscape)");
//        rules.push("screen and (-o-pixel-ratio: 3/2) and (max-device-width: 640px) and (orientation: landscape)");
//        for (i; i < rules.length; i++) {
//          if (Modernizr.mq(rules[i])) {
//            result = true;
//            break;
//          }
//        }
//        return true;//return result;
//
          return (window.devicePixelRatio>=1.5);
      });

      Modernizr.load([
          {
              test : Modernizr.retina,
              yep : 'js/libs/jquery-retina-display/jquery.retinadisplay.min.js',
              complete : function () {
                  if(Modernizr.retina) {
                      $('img[data-res-src]').retinaDisplay();
                  }
              }
          }
      ]);

      jQuery(document).ready(function($){
            var pr = Modernizr.mq('only all and (max-width: 2000px) and (min--moz-device-pixel-ratio: 1)');
            alert(pr);  //returns true. 
          });
    </script>
  </body>
</html>

